# Настройка клиентов VPN

## ~~Настройка Wireguard VPN~~ (Блокируется)

### Windows
1. Идем в поисковик, ищем Wireguard или переходим по ссылке: https://www.wireguard.com/install/, качаем установочник. 
2. Добавляем туннель, нажимая одноименную кнопку. Это обычные текстовые файлы с расширением `.conf`. 
3. Щелкаем по добавленному туннелю и нажимаем подключить.

### Android

1. В Google Play или в F-Droid (альтернативный маркет со свободными программами) качаем Wireguard.
2. Импортируем из файла или архива, если скачали на телефон файл конфигурации `.conf`. Или сканируем qr-код, если лень качать. Называем как захочется.
3. Щелкаем по переключателю напротив добавленного туннеля и вы подключены.

## ~~Настройка IKEv2/IPsec~~ (Блокируется)

Подключение к IKEv2 состоит из двух шагов:
- импортирование сертификата;
- настройка VPN соединения с учетными данными.

Для каждого устройства свое IKEv2 подключение. Одновременное использование одного подключения на разных устройствах приведет к ошибкам.

### Windows (10 и 11)

#### Импорт Сертификата
1. Двойным кликом щелкнуть по сертификату `.cer`.
2. В открывшемся мастере выбрать **Установить сертификат**.
3. Расположение хранилища: Локальный компьютер.
4. Поместить сертификат в хранилище, Обзор.
5. В окошке выбрать **Доверенные корневые центры сертификации**. Далее, Готово.
6. На вопрос системы безопасности хотим ли установить сертификат, говорим Да.
#### Настройка VPN:
1. Перейдите в Параметры Windows / Сеть и интернет / VPN / Добавить VPN подключение.
2. Введите данные сервера VPN: 
    - **Поставщик услуг VPN:** Windows (встроенные);
    - **Имя подключения:** на свой вкус;
    - **Имя или адрес сервера:** тот IP, который пришлю;
    - **Тип VPN:** IKEv2;
    - **Тип данных для входа:** Имя пользователя и пароль;
    - **Имя пользователя** и **Пароль**: предоставленные учетные данные.
3. Подключиться к VPN теперь можно щелкнув по иконке сети и выбрав созданное VPN подключение.

### Android
Установить **StrongSwan VPN Client**:
- [Google Play](https://play.google.com/store/apps/details?id=org.strongswan.android&hl=ru&gl=US)
- [F-Droid](https://f-droid.org/en/packages/org.strongswan.android/)

1. Закинуть на телефон файл сертификата `.pem`.
2. Открыть StrongSwan VPN Client, в правом верхнем меню выбрать **Сертификаты СА**.
3. Снова в правом верхнем меню выбрать уже **Import certificate**.
4. В открывшемся файловом менеджере выбираем тот самый файл сертификата `.pem`. Он появится в списке **Imported**.
5. Вернуться на главный экран программы и щелкнуть **Добавить VPN профиль**.
    - **Сервер**: тот IP, который пришлю;
    - **VPN тип**: IKEv2 EAP (Логин/Пароль)
    - **Логин и пароль**: предоставленные учетные данные.
    - **Сертификат СА**, снять галочку автоматически, и выбрать сертификат CA. Выбираем свой установленный сертификат в списке **Imported**.
    - **Название профиля** на свой вкус.

## Настройка клиентов Outline VPN (ShadowSocks)

Переходим по ссылке https://getoutline.org/ru/get-started/, качаем и устанавливаем на свое устройство **Outline Client**. 

Для Android программа есть в [Google Play](https://play.google.com/store/apps/details?id=org.outline.android.client) и [F-Droid](https://f-droid.org/ru/packages/org.outline.android.client/).

Приложение одинаковое для всех устройств, действия везде одни и те же:
- нажимаем `+`, Добавление ключа доступа;
- копируем в поле полученный ключ;
- подключаемся, profit.

## Настройка клиентов Xray VLESS

Xray VLESS Reality — современный протокол позволяющий замаскировать трафик под валидный трафик HTTPs. Настройки находятся в файле `vless_username.txt` и для мобильных устройств `vless_username.png`

На данный момент подписка на настройки вероятно работать не будет, т.к. поднята на портах 50000+, их могут блокировать.

Так же настоятельно рекомендую не пользоваться отечественными браузерами вроде YandexBrowser, ибо туда могут встроить невесть чего.
### Windows / Linux

Есть несколько разных клиентов на десктоп. С какими не было проблем:

- Nekoray (NekoBox)
- v2rayN

#### Nekoray

Переходим по ссылке https://github.com/MatsuriDayo/nekoray/releases на официальный репозиторий и скачиваем последнюю версию для своей операционной системы. Версия для Windows — портативная, распаковываем куда вам удобно, но в пути не должно быть кириллических символов.

Запускаем `nekobox.exe` (можно создать ярлык). На сервере самоподписанный сертификат и, чтобы не было ошибок, переходим в Настройки / Основные настройки. Далее:

- Подписка — Игнорировать ошибки TLS при обновлениях подписок, включаем,
- Безопасность — Не проверять подлинность TLS сертификатов по умолчанию, включаем.

Копируем ссылку формата `vless://bla-bla-lba`, в NekoBox щелкаем Сервер / Добавить профиль из буфера обмена. Добавится строка с подключением. Запустить можно нажатием Enter по выбранному подключению или правой кнопкой мыши Запустить. Чтобы подключение работало как VPN и туннелировало трафик до сервера в верхнем углу программы ставим галочку **Режим TUN**.

#### v2rayN

Скачиваем последнюю версию программы из официального репозитория https://github.com/2dust/v2rayN/releases. Под Windows это `v2rayN-windows-64-desktop.zip`. Распаковываем в удобное место (путь без кириллических символов), запускаем. В верхнем правом углу 3 точки — меню для выбора локализации, размера шрифтов и темы приложения. 

Копируем ссылку формата `vless://bla-bla-lba`. Переходим в v2rayN, Меню Сервера / Импорт массива URL из буфера обмена, вставляем ссылку.  Так же внизу включаем галочку **Режим VPN**. Этой же галочкой выключаем VPN.

v2rayN поддерживает листы маршрутизации трафика, подробнее — https://habr.com/ru/articles/853796/. Идем в меню Настройки / Региональные пресеты / Россия. Внизу появятся 3 дополнительных пресета:
1. **RUv1 Вcё** — как следует из названия, направляет весь трафик в прокси/VPN.
2. **RUv1 Вcё, кроме РФ** — в прокси/VPN направляется весь трафик, кроме торрентов и всех российских IP. В этом режиме нормально работают госуслуги, ржд, банки и т.д. (Предпочтительный режим).
3. **RUv1 Заблокированное** — В прокси/VPN направляются только заблокированные в России домены (antifilter community и re:filter) и ip адреса.

### Android

#### v2rayNG

Установить приложение v2rayNG из GooglePlay или `.apk` файл из официального репозитория https://github.com/2dust/v2rayNG/releases.

Зайти в приложение, нажать плюсик, Импортировать из QR-кода. Отсканировать последний (с зеленым заголовком) QR-код из файла  `vless_username.png`

